{{ extends "/default.html" }}

{{ define "body"}}
<section class="text-fields ng-scope">
  <div class="mdl-color--amber ml-header relative clear">
    <div class="p-50"></div>
  </div>

  <div class="mdl-grid mdl-grid--no-spacing">

    <div class="mdl-cell mdl-cell--3-col mdl-cell--12-col-tablet mdl-cell--12-col-phone mdl-color--grey-100">
      <div class="p-40 p-r-20 p-20--small">
        <div class=" mdl-color-text--blue-grey-400">
          <h3><i class="material-icons f-left m-r-5">lock</i> Password</h3>
          <p>Havn't decided what to be shown here.</p>

        </div>
      </div>
    </div>

    <div class="mdl-cell mdl-cell--9-col mdl-cell--12-col-tablet mdl-cell--12-col-phone no-p-l">
      <div class="p-20 ml-card-holder ml-card-holder-first">
        <div class="mdl-card mdl-shadow--1dp fullwidth">
          <div class="mdl-card__title">
            <h2 class="mdl-card__title-text">Password</h2>
          </div>
          <div class="p-15">

            <form id="password" class="form form-align clear" action="#" name="password-form" method="post">

              <div class="mdl-textfield mdl-js-textfield fullwidth">
                <input class="mdl-textfield__input" type="password" id="old" name="old">
                <label class="mdl-textfield__label" for="old">Old Password</label>
              </div>

              <div class="mdl-textfield mdl-js-textfield fullwidth">
                <input class="mdl-textfield__input" type="password" id="new" name="new">
                <label class="mdl-textfield__label" for="new">New Password</label>
              </div>

              <div class="mdl-textfield mdl-js-textfield fullwidth">
                <input class="mdl-textfield__input" type="password" id="confirm" name="confirm">
                <label class="mdl-textfield__label" for="confirm">Confirm new password</label>
              </div>

              <div class="m-t-20">
                <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-color--blue-500 mdl-js-ripple-effect">
                  Change Password
                  <span class="mdl-button__ripple-container"><span class="mdl-ripple is-animating"></span></span></button>
              </div>

            </form>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{{end}}

{{ define "after_footer" }}
<script>
$(function(){
  new FormValidator("password-form",[
      {"name":"old","rules":"min_length[2]|max_length[20]"},
      {"name":"new","rules":"min_length[2]|max_length[20]"},
      {"name":"confirm","rules":"required|matches[new]"}
  ],function(errors,e){
    e.preventDefault();
    $('.invalid').hide();
    if(errors.length){
      $("#"+errors[0].id+"-invalid").removeClass("hide").show();
      return;
    }
    $('#password').ajaxSubmit({
      "success": function() {
        alertify.success("Password changed");
      },
      "error": function() {
        alertify.error(("Error: " + JSON.parse(json.responseText).msg));
      }
    });
  })
});
</script>
{{ end }}
